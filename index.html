<!DOCTYPE html>
<!--

ASSIGNMENT:

Latin for "Little Animal", the term "animalcule" was coined
by Anton van Leeuwenhoek, the 17th-century discoverer of microorganisms,
to describe the inhabitants of the strange new world he was
observing. In this exercise small microorganism-like entities are cloned
by clicking on their ancestors. Since we needed a test to put our 
candidates "under a microscope", we thought it would be poetic 
to make them create their own microscopic environment, as well as 
something small and simple that would tell us more about them
than a casual glance at the assignment would expect.

SOLUTION:

-->
<html lang='en-us'>
<head>

<title> Animalcules | Micheal Parks </title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="initial-scale=1, maximum-scale=1, width=device-width, user-scalable=no">

<style>

body, html {
  margin : 0;
}

.animalcule {
  position    : absolute;
  top         : 0;
  left        : 0;
  height      : 50px;
  width       : 50px;
}

</style>
</head>

<body></body>

<script>

!function(){
  'use strict';

  var 
  app_window  = window,
  app_doc     = app_window.document,

  isMobile    = /mobile|tablet|ip(ad|hone|od)|android|silk/i.test(app_window.navigator.userAgent) && 
                app_window['ontouchstart'] !== void 0,
  press       = (isMobile) ? 'touchend' : 
                (app_window.navigator.pointerEnabled || app_window.navigator.msPointerEnabled) ? 'pointerup' : 
                'mouseup',
  transform   = app_doc.body.style['webkitTransform'] !== void 0 ? 'webkitTransform' : 'transform',
  animalcules = [],
  math = Math;

  function random () {
    return math.random();
  }

  function round (x) {
    return math.round(x);
  }

  // Creates adorable colors
  function pastelGenerator () {
    return '#' + 
           /* r */ (round(random() * 127) + 127).toString(16) + 
           /* g */ (round(random() * 127) + 127).toString(16) + 
           /* b */ (round(random() * 127) + 127).toString(16);
  };

  // The constructor for our animalcules
  function binaryFission (e) {

    var 
    len = animalcules.length,
    element = app_doc.createElement('div');

    element.className = 'animalcule';
    element.style.backgroundColor = pastelGenerator();
    element.addEventListener(press, binaryFission);

    // Add animacule to the body and the array
    app_doc.body.appendChild(element);

    animalcules.push({
      style : element.style,
      x     : len !== 0 ? animalcules[len-1].x : app_window.innerWidth/2,
      y     : len !== 0 ? animalcules[len-1].y : app_window.innerHeight/2,
      dx    : random() * 3,
      dy    : random() * 3
    });

  };

  // Game loop function, called recursively through requestAnimationFrame
  function tick () {
    for (var i = 0, x, y, len = animalcules.length - 1; i < len; i++) {
      x = animalcules[i].x;
      y = animalcules[i].y;

      // Add the deltas to the positions
      x = animalcules[i].x = x + animalcules[i].dx;
      y = animalcules[i].y = y + animalcules[i].dy;

      // Reverse deltas if animalcule hits a wall
      if (x + 50 >= app_window.innerWidth || x <= 0)
        animalcules[i].dx = -animalcules[i].dx;
      if (y + 50 >= app_window.innerHeight || y <= 0)
        animalcules[i].dy = -animalcules[i].dy;

      // Update the positions in the view
      animalcules[i].style[transform] = 'translate(' + x + 'px,' + y + 'px)';
    }

    // Request the next frame to continue the game loop
    app_window.requestAnimationFrame(tick);
  };

  // Init.
  binaryFission();
  tick();
}();

</script>
</html>